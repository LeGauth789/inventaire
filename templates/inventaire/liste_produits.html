{% extends 'inventaire/base.html' %}

{% block title %}Liste des Fiches Produit{% endblock %}

{% block content %}
<div class="container mt-4">
  <h1 class="mb-4">Liste des Fiches Produit</h1>

  <div class="mb-3 text-end">
    <a href="{% url 'ajouter_fiche_produit' %}" class="btn btn-success">
      <i class="bi bi-plus-circle"></i> Ajouter une fiche produit
    </a>
  </div>

  {% if fiches_produit %}
  <div class="table-responsive">
    <table class="table table-bordered table-hover align-middle">
      <thead class="table-light">
        <tr>
          <th>Nom</th>
          <th>Numéro FDS</th>
          <th>Stock actuel</th>
          <th>Date de mise à jour</th>
          <th class="text-center" style="width: 120px;">Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for fiche in fiches_produit %}
        <tr>
          <td>{{ fiche.nom }}</td>
          <td>{{ fiche.numero_fds }}</td>
          <td>{{ fiche.stock_actuel }}</td>
          <td>{{ fiche.updated_at|date:"d/m/Y H:i" }}</td>
          <td class="text-center">
            <a href="{% url 'fiche_produit' fiche.pk %}" class="btn btn-sm btn-primary me-1" title="Voir / Modifier">
              <i class="bi bi-pencil-square"></i>
            </a>
            <a href="{% url 'supprimer_fiche_produit' fiche.pk %}" class="btn btn-sm btn-danger" title="Supprimer" onclick="return confirm('Voulez-vous vraiment supprimer cette fiche produit ?');">
              <i class="bi bi-trash"></i>
            </a>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  {% else %}
  <div class="alert alert-info text-center">
    Aucune fiche produit enregistrée.
  </div>
  {% endif %}
</div>
{% endblock %}
